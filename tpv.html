<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Inicio</title>
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="styles/tpv.css" />
    <script src="scripts/proteccion.js"></script>
    <!-- Resaltado del enlace activo  en el navbar -->
    <script>
    window.onload = () => {
        const links = document.querySelectorAll('.sidebar a');
        links.forEach(link => {
        if (link.href === window.location.href) {
            link.classList.add('active');
        }
        });
    };
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDN8KAiad5vmKNwhtfd9EUzVgTt2uUapno",
    authDomain: "eroskiapp.firebaseapp.com",
    databaseURL: "https://eroskiapp-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "eroskiapp",
    storageBucket: "eroskiapp.appspot.com",
    messagingSenderId: "1033463841470",
    appId: "1:1033463841470:web:ec92569dd7dabe8a93d4ef"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

   // TEST DE CONEXIÓN
  db.ref().once("value")
    .then(snapshot => {
      console.log("🔥 Firebase raíz:", snapshot.val());
    })
    .catch(err => {
      console.error("❌ Error al conectar con Firebase:", err);
    });
</script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>

</head>
<body>
  <div class="container">
    <nav class="sidebar">

        <a href="index.html"><img src="recursos/img/iniciologo.png" alt="Inicio" class="icon" /></a>
        <a href="balanza.html"><img src="recursos/img/balanzalogo.png" alt="Balanza" class="icon" /></a>
        <a href="calendario.html"><img src="recursos/img/imagenes.png" alt="Calendario" class="icon" /></a>
        <a href="codigos.html"><img src="recursos/img/codigos.png" alt="Códigos" class="icon" /></a>
        <a href="tpv.html"><img src="recursos/img/tpv.png" alt="tpv" class="icon" /></a>
        <a href="horarios.html"><img src="recursos/img/calendario.png" alt="Horarios" class="icon" /></a>
    </nav>

<main class="content">
  <h1>🔍 Códigos de TPV</h1>


  <!-- Buscador + Filtro de categoría + Botón nuevo -->
  <div id="selectores">
    <input type="text" id="buscador" placeholder="Buscar codigo..." />
    <select id="filtro-categoria">
      <option value="">Todos los códigos</option>
      <option value="Apertura">Apertura</option>
      <option value="Cierre">Cierre</option>
      <option value="General">General</option>
      <!-- Puedes añadir más si hace falta -->
    </select>
    <button id="btn-nuevo" style="margin: 1rem 0;">➕ Añadir código</button>
  </div>

  <!-- Contenedor de tarjetas -->
  <div id="galeria" class="galeria"></div>
</main>

<!-- Modal para editar código -->
<div id="modal-edicion" class="modal oculto">
  <div class="modal-contenido">
    <h3>Editar producto</h3>
    <div class="form-grid">

    <div class="campo">
    <input id="edit-nombre" type="text" placeholder="Nombre" />
    </div>

    <div class="campo">
    <input id="edit-balanza" type="text"  placeholder="Código ordenador" />
    </div>

    <div class="campo">
    <input id="edit-merma" type="text"  placeholder="Código pistola" />
    </div>
    <div class="campo">
    <textarea id="edit-detalles" placeholder="Notas o detalles adicionales..."></textarea>
    </div>


      <div class="campo">
        <select id="edit-cat">
          <option value="" disabled selected>Selecciona una categoría</option>
          <option value="Apertura">Apertura</option>
          <option value="Cierre">Cierre</option>
          <option value="General">General</option>
        </select>
      </div>

      <!-- Acciones -->
      <div class="acciones">
        <button id="guardar-edicion" title="Guardar cambios">💾</button>
        <button id="btn-eliminar" class="eliminar" title="Eliminar">🗑️</button>
        <button onclick="cerrarModalEdicion()" title="Cerrar sin guardar">❌</button>
        </div>
            <!-- Modal -->
            <div id="modal-edicion" class="modal oculto">
    <div class="modal-contenido">
        <h3>Editar producto</h3>
        <div class="form-grid">

        <div class="campo">
            <input id="edit-nombre" type="text" placeholder="Nombre" />
        </div>

        <div class="campo">
            <input id="edit-balanza" type="number" inputmode="numeric" placeholder="Código balanza" />
        </div>

        <div class="campo">
            <input id="edit-merma" type="number" inputmode="numeric" placeholder="Código merma" />
        </div>

        <div class="campo">
            <select id="edit-cat">
            <option value="" disabled selected>Selecciona una categoría</option>
            <option value="Apertura">Apertura</option>
            <option value="Cierre">Cierre</option>
            <option value="General">General</option>
            </select>
        </div>

        <div class="campo" style="grid-column: 1 / -1;">
            <textarea id="edit-detalles" placeholder="Notas o detalles..."></textarea>
        </div>

        <div class="acciones">
            <button id="guardar-edicion" title="Guardar cambios">💾</button>
            <button id="btn-eliminar" class="eliminar" title="Eliminar">🗑️</button>
            <button onclick="cerrarModalEdicion()" title="Cerrar sin guardar">❌</button>
        </div>
        
    </div>
  </div>
</div>

    </div>
  </div>
</div>



  <script src="scripts/tpv.js"></script>
</body>

</html>
