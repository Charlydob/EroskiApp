/* ======= OPAL THEME (sin cambiar tama√±os) ======= */
:root{
  --opal-bg-1:#0f172a;
  --opal-bg-2:#1e293b;
  --opal-surface:rgba(255,255,255,0.04);
  --opal-surface-2:rgba(255,255,255,0.08);
  --opal-border:rgba(255,255,255,0.12);
  --opal-text:#e5eaf2;
  --opal-text-dim:#cbd5e1;
  --opal-accent:#3b82f6;
  --opal-accent-2:#8b5cf6;
  --opal-positive:#22c55e;
  --opal-warn:#f59e0b;
  --shadow-1:0 2px 10px rgba(0,0,0,0.25);
  --shadow-2:0 8px 30px rgba(0,0,0,0.40);
}

/* üß† Evita doble toque en m√≥viles */
html, body, button, input, select, textarea, table, th, td { touch-action: manipulation; }

/* üß± Estilo base */
body {
  margin: 20px;                    /* (respeta) */
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background: linear-gradient(180deg, var(--opal-bg-1) 0%, var(--opal-bg-2) 100%);
  color: var(--opal-text);
}

/* üì¶ Layout general */
.container { display: flex; min-height: 100vh; }    /* (respeta) */
.content {
  flex: 1; padding: 20px; display: flex; flex-direction: column; align-items: center; /* (respeta) */
}
.sidebar {
  width: 80px;                               /* (respeta) */
  background: linear-gradient(180deg, #111827 0%, #0b1220 60%, #060a14 100%);
  display: flex; flex-direction: column; align-items: center; padding: 10px 0;
  box-shadow: var(--shadow-1);
}
.sidebar .logo {
  margin-bottom: 20px; font-size: 1.2em; color: var(--opal-text);
  text-shadow: 0 1px 3px rgba(0,0,0,0.6);
}

/* üè∑Ô∏è T√≠tulo */
h1 { text-align: center; color: var(--opal-text); margin-bottom: 20px; }

/* üîç Buscador */
#buscador {
  display: block; margin: 1em auto; padding: 0.5em; font-size: 1em; width: 80%; max-width: 400px; /* (respeta) */
  position: relative; padding-right: 30px; background: var(--opal-surface); color: var(--opal-text);
  border: 1px solid var(--opal-border); border-radius: 8px; box-shadow: var(--shadow-1);
}
#buscador::-webkit-search-cancel-button { -webkit-appearance: none; appearance: none; display: none; }
#buscador.clearable::after {
  content:'‚úñ'; position:absolute; right:10px; top:50%; transform:translateY(-50%);
  color: var(--opal-text-dim); font-size:16px; cursor:pointer; z-index:1;
}
input.clearable{
  background: var(--opal-surface) no-repeat right 0.7em center;
  background-size: 1em; padding-right: 2em; color: var(--opal-text);
  border: 1px solid var(--opal-border); border-radius: 8px;
}

/* ‚ö° Filtros r√°pidos */
.filtros-rapidos { display:flex; justify-content:center; gap:10px; margin-bottom:1em; flex-wrap:wrap; }
.filtros-rapidos button{
  background: linear-gradient(135deg, var(--opal-accent), var(--opal-accent-2));
  color:#fff; border:none; border-radius:20px; padding:0.5em 1em; cursor:pointer; font-size:0.9em;
  box-shadow: var(--shadow-1);
  transition: transform .08s ease;
}
.filtros-rapidos button:hover{ transform: scale(1.03); }

/* üñºÔ∏è Galer√≠a (manteniendo rejillas originales) */
.galeria { display:grid; grid-template-columns: repeat(3, 1fr); gap: 1em; padding:1em; max-height:fit-content; align-items:stretch; }
.galeria { display:grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap:10px; padding:1rem; justify-items:center; }
.galeria { display:grid; grid-template-columns: repeat(3, 1fr); gap:0rem; padding:1rem; overflow-x:hidden; flex-wrap:wrap; }

/* üì¶ Item */
.item{
  background: var(--opal-surface);
  border: 1px solid var(--opal-border);
  border-radius: 8px;
  box-shadow: var(--shadow-1);
  text-align:center; width:110px; height:120px; margin:0 auto; position:relative; overflow:hidden;
  transition: transform 0.2s ease;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  flex-shrink:0; flex-grow:0; flex-basis:auto; box-sizing:border-box; /* (tama√±os respetados) */
}

/* üåü Vista normal */
.vista-normal{ display:flex; flex-direction:column; align-items:center; width:100%; height:100%; z-index:1; box-sizing:border-box; }
.vista-normal img{ width:60px; height:60px; object-fit:cover; border-radius:4px; margin-bottom:0.5em; }
.nombre{ font-weight:700; font-size:0.8em; margin-top:0; color:var(--opal-text) }

/* ü™Ñ Vista detalles */
.vista-detalles{
  position:absolute; inset:0; background: rgba(59,130,246,0.15);
  color: var(--opal-text); font-size:16px; border-radius:8px; display:none; flex-direction:column;
  justify-content:center; align-items:center; padding:0; z-index:2; box-sizing:border-box;
  box-shadow: inset 0 0 6px rgba(0,0,0,0.25);
  animation: aparecer .15s ease-in-out; width:100%; height:100%; pointer-events:none;
}
.item.activo .vista-detalles{ display:flex; pointer-events:auto; }
.item.activo .vista-normal{ display:none; }
.vista-detalles .dato{ margin-bottom:4px; text-align:center; }
.vista-detalles .cerrar{ margin-top:10px; font-weight:700; color:#fca5a5; cursor:pointer; font-size:0.9em; }

@keyframes aparecer{ from{opacity:0; transform:scale(0.9)} to{opacity:1; transform:scale(1)} }

/* #Ô∏è‚É£ C√≥digo simple */
.codigo{ font-weight:700; color:var(--opal-text) }

/* üì± M√≥vil */
@media (max-width: 480px){
  .sidebar{ flex-direction:row; height:60px; width:100%; justify-content:space-around; }
  .sidebar .logo{ display:none; }
  .content{ padding:10px; }
  table, th, td{ font-size:0.85em; }
  input{ width:60px; border-radius:20px; }
}

/* ====== Modal ====== */
.modal{
  display:flex; position:fixed; z-index:100; top:0; left:0; width:100%; height:100vh;
  background: rgba(2,6,23,0.55); justify-content:center; align-items:center; overflow:hidden;
}
.modal.oculto{ display:none; }

.modal-contenido{
  background: var(--opal-bg-2);
  padding:1rem; border-radius:10px; width:90%; max-width:360px; max-height:90vh; overflow-y:auto;
  display:flex; flex-direction:column; gap:0.7rem; font-size:0.95em; box-sizing:border-box;
  border:1px solid var(--opal-border); box-shadow: var(--shadow-2); color: var(--opal-text);
}

/* üßæ Inputs del modal */
.modal-contenido input,
.modal-contenido select,
.modal-contenido textarea{
  width:100%; padding:0.6em; border-radius:6px; border:1px solid var(--opal-border);
  font-size:0.95em; box-sizing:border-box; background: var(--opal-surface); color: var(--opal-text);
}
.modal-contenido label{ font-weight:700; margin-bottom:0.2em; font-size:0.85em; color: var(--opal-text-dim); }

.acciones{
  display:grid; grid-template-columns:repeat(2,1fr); gap:10px; justify-items:stretch; margin-top:1em;
}
.acciones button{
  padding:0.6em 1.2em; border:none; border-radius:6px; font-size:0.9em; cursor:pointer;
  box-shadow: var(--shadow-1); transition: transform .08s ease;
}
#guardar-edicion{ background: linear-gradient(135deg, var(--opal-positive), #16a34a); color:#fff; }
#toggle-visible { background: linear-gradient(135deg, var(--opal-warn), #f59e0b); color:#111827; }
#btn-eliminar   { background: linear-gradient(135deg, #ef4444, #dc2626); color:#fff; }
.acciones button:last-child{ background: #475569; color:#fff; }
.acciones button:hover{ transform: scale(1.03); }

@media (max-width: 480px){
  .modal-contenido{ padding:1rem; font-size:0.9em; }
  .modal-contenido input, .modal-contenido select, .modal-contenido textarea{
    font-size:1em; padding:0.5em; width:100%;
  }
  .acciones{ flex-direction:column; }
  .acciones button{ width:100%; }
}

/* üî≤ Tarjetas peque√±as para galer√≠a (mant√©n tama√±os) */
.tarjeta-producto{
  /* primera definici√≥n (mantiene dimensiones originales si ya dependes de ellas) */
  background-color: var(--opal-surface);
  border-radius: 8px;
  box-shadow: var(--shadow-1);
  width: 110px; height: 10px;               /* (respeta lo que ten√≠as aqu√≠) */
  display:flex; flex-direction:column; align-items:center; justify-content:flex-start; text-align:center;
  padding:0.5rem; transition: transform 0.2s ease; position:relative; box-sizing:content-box;
  border:1px solid var(--opal-border); color: var(--opal-text);
}

/* segunda definici√≥n (la que predomina en tu cascada actual) */
.tarjeta-producto{
  position:relative; background-color: var(--opal-surface); border-radius:8px; box-shadow: var(--shadow-1);
  padding:0.5em; width:100px; height:90px; max-height:90px; max-width:100px; margin:3px;
  text-align:center; display:flex; flex-direction:column; justify-content:start; align-items:center;
  overflow:hidden; transition: transform 0.2s ease; font-size:16px; border:1px solid var(--opal-border);
  color: var(--opal-text);
}
.tarjeta-producto img{
  display:block; width:50px; height:50px; object-fit:cover; margin-left:auto; margin-right:auto; border-radius:4px;
  pointer-events:none; user-select:none; -webkit-user-drag:none;
}
.vista-simple h4{ margin:0; font-size:12px; font-weight:700; color: var(--opal-text) }
.vista-simple p{ margin:0; font-size:16px; color: var(--opal-text-dim); }

/* üßä Bot√≥n editar */
.btn-editar{
  position:absolute; top:4px; right:4px; background: linear-gradient(135deg, var(--opal-accent), var(--opal-accent-2));
  color:#fff; border:none; border-radius:4px; padding:0.3em 0.5em; font-size:0.7em; cursor:pointer;
  transition: opacity .2s; z-index:3; box-shadow: var(--shadow-1);
}
.btn-editar.oculto{ display:none; }

/* Vista detalles de tarjeta */
.vista-detalles{
  position:absolute; inset:0; background: rgb(148, 163, 184);
  display:flex; flex-direction:column; justify-content:center; align-items:center; padding:0.5em; font-size:0.7em; border-radius:8px; z-index:2;
}
.vista-detalles.oculto{ display:none; }
.vista-detalles p{ margin:2px 0; }
.cerrar-detalle{ margin-top:6px; font-size:0.9em; color:#fca5a5; cursor:pointer; }

/* Formulario */
.form-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:0.7rem 1rem; }
.campo{ display:flex; flex-direction:column; width:100%; }
.campo input, .campo select, .campo textarea{
  padding:0.5em; border:1px solid var(--opal-border); border-radius:6px; font-size:0.9em; background: var(--opal-surface); color: var(--opal-text);
}
#selectores{ margin:0px; }
.campo textarea, .campo input{ box-shadow: 0 1px 3px rgba(0,0,0,0.18); }

/* Botones contador */
#btn-sumar, #btn-restar{
  background: rgba(59,130,246,0.25); margin:0; border-radius:10px; font-size:0.9em; padding:0.3em 0.8em; color:var(--opal-text);
  border:1px solid var(--opal-border);
}
#btn-sumar.boton-activo, #btn-restar.boton-activo{ color:#fff; border:2px solid #60a5fa; }
.tarjeta-activa{ border:2px solid #60a5fa; background: rgba(59,130,246,0.12); height:86px; width:100px; } /* (respeta) */

/* Contador */
.contador.previa-contador{
  position:absolute; top:6px; left:2px; background: rgba(255,255,255,0.85);
  border-radius:8px; padding:2px 6px; font-size:1.2em; font-weight:700; color:#111827; z-index:2; width:15px; height:23px; /* (respeta) */
}
.tarjeta-producto{ position:relative; margin:5px; } /* (ya lo ten√≠as; mantiene) */

/* Resets y l√≠mites */
*{ box-sizing:border-box; max-width:100vw; }

/* üì∑ Lector de c√≥digos (respeta medidas) */
#lector-codigos{
  width:100%; max-width:350px; height:300px; background:black; position:relative; overflow:hidden; /* (respeta) */
  border:1px solid var(--opal-border); border-radius:8px; box-shadow: var(--shadow-1);
}
#lector-codigos video, #lector-codigos canvas{
  width:100% !important; height:100% !important; object-fit:cover !important; display:block !important;
  position:absolute; top:0; left:0; z-index:1;
}
#lector-codigos video{ transform:none !important; }
#lector-wrapper{ display:flex; justify-content:center; align-items:center; height:auto; min-height:320px; }

#filtro-categoria,
#edit-cat{
  -webkit-appearance: none;
  appearance: none;
  background: var(--opal-surface);
  color: var(--opal-text);
  border: 1px solid var(--opal-border);
  border-radius: 10px;
  /* sin width/height: respetamos dimensiones actuales */
  padding-right: 2.2em; /* espacio para la flecha */
  padding-left: 0.75em;
  padding-bottom: 0.25em;
  padding-top: 0.25em;
  box-shadow: var(--shadow-1);
  transition: box-shadow .12s ease, border-color .12s ease, background-color .12s ease;
  background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='%23cbd5e1' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5H7z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right .6em center;
  background-size: 12px;
}

#filtro-categoria:focus,
#edit-cat:focus{
  outline: none;
  border-color: var(--opal-accent);
  box-shadow: 0 0 0 2px rgba(59,130,246,.45), var(--shadow-1);
  background-color: rgba(255,255,255,0.05);
}

/* Estado deshabilitado */
#filtro-categoria:disabled,
#edit-cat:disabled{
  opacity: .6;
  cursor: not-allowed;
}

/* Opciones (seg√∫n soporte del SO/navegador) */
#filtro-categoria option,
#edit-cat option{
  background: #0b1220;
  color: var(--opal-text);
}

/* ===== Bot√≥n ‚ÄúA√±adir producto‚Äù (Opal, sin tocar tama√±o) ===== */
#btn-nuevo{
  background: linear-gradient(135deg, var(--opal-accent), var(--opal-accent-2));
  color:#fff;
  border:none;
  border-radius:10px;
    padding-right: 2.2em; /* espacio para la flecha */
  padding-left: 0.75em;
  padding-bottom: 0.25em;
  padding-top: 0.25em;
  /* no cambiamos width/height/font-size */
  box-shadow: var(--shadow-1);
  font-weight: 700;
  transition: transform .08s ease, filter .12s ease;
}
#btn-nuevo:hover{ filter: brightness(1.05); }
#btn-nuevo:active{ transform: scale(.98); }
#btn-nuevo:focus{
  outline: none;
  box-shadow: 0 0 0 2px rgba(59,130,246,.45), var(--shadow-1);
}